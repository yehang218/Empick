-- ========================================
-- ğŸš¨ Step 0. ì™¸ë˜í‚¤ ì œì•½ ì¡°ê±´ ì„ì‹œ í•´ì œ
-- ========================================
SET FOREIGN_KEY_CHECKS = 0;

-- ========================================
-- ğŸ§¹ Step 1. ê¸°ì¡´ ë°ì´í„° ì •ë¦¬ (í•˜ìœ„ í…Œì´ë¸” â†’ ìƒìœ„ í…Œì´ë¸” ìˆœ)
-- TRUNCATEëŠ” AUTO_INCREMENTë„ ì´ˆê¸°í™”ë¨
-- ========================================
TRUNCATE TABLE attendance_record_change_request;
TRUNCATE TABLE attendance_record;
TRUNCATE TABLE attendance_category;

-- ========================================
-- ğŸ”§ Step 2. AUTO_INCREMENT ì œê±° (ëª…ì‹œì  ID ì‚½ì…ì„ ìœ„í•´)
-- ========================================
ALTER TABLE attendance_category MODIFY COLUMN id INT NOT NULL;
ALTER TABLE attendance_record MODIFY COLUMN id INT NOT NULL;

-- (âš ï¸ ì´ë¯¸ idì— AUTO_INCREMENTê°€ ì—†ëŠ” ê²½ìš°, ì´ ë‹¨ê³„ëŠ” ë¬´ì‹œí•´ë„ ë¬´ë°©í•¨)

-- ========================================
-- ğŸ“˜ Step 3. attendance_category ENUM ê³ ì •ê°’ ì‚½ì…
-- IDë¥¼ ëª…ì‹œí•˜ì—¬ PK ì¶©ëŒ ë°©ì§€
-- ========================================
INSERT INTO attendance_category (`id`, `status`, `created_at`, `updated_at`)
VALUES
(0, 0, NOW(), NOW()),  -- ì¶œê·¼
(1, 1, NOW(), NOW()),  -- í‡´ê·¼
(2, 2, NOW(), NOW()),  -- ì§€ê°
(3, 3, NOW(), NOW());  -- ì¡°í‡´

-- ========================================
-- âœ… Step 4. ì™¸ë˜í‚¤ ì œì•½ ë³µêµ¬
-- ========================================
SET FOREIGN_KEY_CHECKS = 1;


-- ========================================
-- ğŸ“ Step 4. attendance_record ë”ë¯¸ ë°ì´í„° (10ì¼ì¹˜)
-- ì‚¬ì› ID: 1, 10, 55 / ë‚ ì§œ: 2025-06-01 ~ 2025-06-10

ALTER TABLE attendance_record MODIFY COLUMN id INT NOT NULL AUTO_INCREMENT;

INSERT INTO attendance_record (`member_id`, `attendance_category_id`, `record_time`, `status`, `created_at`, `updated_at`)
VALUES
-- í…ŒìŠ¤íŠ¸ì‚¬ì›1 - ì¶œê·¼/í‡´ê·¼
-- id 1~20
(1, 0, '2025-06-01 09:00:00', 0, NOW(), NOW()),
(1, 0, '2025-06-02 09:00:00', 0, NOW(), NOW()),
(1, 0, '2025-06-03 09:00:00', 0, NOW(), NOW()),
(1, 0, '2025-06-04 09:00:00', 0, NOW(), NOW()),
(1, 0, '2025-06-05 09:00:00', 0, NOW(), NOW()),
(1, 0, '2025-06-06 09:00:00', 0, NOW(), NOW()),
(1, 0, '2025-06-07 09:00:00', 0, NOW(), NOW()),
(1, 0, '2025-06-08 09:00:00', 0, NOW(), NOW()),
(1, 0, '2025-06-09 09:00:00', 0, NOW(), NOW()),
(1, 0, '2025-06-10 09:00:00', 0, NOW(), NOW()),
(1, 1, '2025-06-01 18:00:00', 0, NOW(), NOW()),
(1, 1, '2025-06-02 18:00:00', 0, NOW(), NOW()),
(1, 1, '2025-06-03 18:00:00', 0, NOW(), NOW()),
(1, 1, '2025-06-04 18:00:00', 0, NOW(), NOW()),
(1, 1, '2025-06-05 18:00:00', 0, NOW(), NOW()),
(1, 1, '2025-06-06 18:00:00', 0, NOW(), NOW()),
(1, 1, '2025-06-07 18:00:00', 0, NOW(), NOW()),
(1, 1, '2025-06-08 18:00:00', 0, NOW(), NOW()),
(1, 1, '2025-06-09 18:00:00', 0, NOW(), NOW()),
(1, 1, '2025-06-10 18:00:00', 0, NOW(), NOW()),

-- í…ŒìŠ¤íŠ¸ì‚¬ì›2 - id 21~40
(10, 0, '2025-06-01 09:05:00', 0, NOW(), NOW()),
(10, 0, '2025-06-02 09:05:00', 0, NOW(), NOW()),
(10, 0, '2025-06-03 09:05:00', 0, NOW(), NOW()),
(10, 0, '2025-06-04 09:05:00', 0, NOW(), NOW()),
(10, 0, '2025-06-05 09:05:00', 0, NOW(), NOW()),
(10, 0, '2025-06-06 09:05:00', 0, NOW(), NOW()),
(10, 0, '2025-06-07 09:05:00', 0, NOW(), NOW()),
(10, 0, '2025-06-08 09:05:00', 0, NOW(), NOW()),
(10, 0, '2025-06-09 09:05:00', 0, NOW(), NOW()),
(10, 0, '2025-06-10 09:05:00', 0, NOW(), NOW()),
(10, 1, '2025-06-01 18:10:00', 0, NOW(), NOW()),
(10, 1, '2025-06-02 18:10:00', 0, NOW(), NOW()),
(10, 1, '2025-06-03 18:10:00', 0, NOW(), NOW()),
(10, 1, '2025-06-04 18:10:00', 0, NOW(), NOW()),
(10, 1, '2025-06-05 18:10:00', 0, NOW(), NOW()),
(10, 1, '2025-06-06 18:10:00', 0, NOW(), NOW()),
(10, 1, '2025-06-07 18:10:00', 0, NOW(), NOW()),
(10, 1, '2025-06-08 18:10:00', 0, NOW(), NOW()),
(10, 1, '2025-06-09 18:10:00', 0, NOW(), NOW()),
(10, 1, '2025-06-10 18:10:00', 0, NOW(), NOW()),

-- ì¸ì‚¬ë§¨ - id 41~60
(55, 0, '2025-06-01 08:50:00', 0, NOW(), NOW()),
(55, 0, '2025-06-02 08:50:00', 0, NOW(), NOW()),
(55, 0, '2025-06-03 08:50:00', 0, NOW(), NOW()),
(55, 0, '2025-06-04 08:50:00', 0, NOW(), NOW()),
(55, 0, '2025-06-05 08:50:00', 0, NOW(), NOW()),
(55, 0, '2025-06-06 08:50:00', 0, NOW(), NOW()),
(55, 0, '2025-06-07 08:50:00', 0, NOW(), NOW()),
(55, 0, '2025-06-08 08:50:00', 0, NOW(), NOW()),
(55, 0, '2025-06-09 08:50:00', 0, NOW(), NOW()),
(55, 0, '2025-06-10 08:50:00', 0, NOW(), NOW()),
(55, 1, '2025-06-01 18:30:00', 0, NOW(), NOW()),
(55, 1, '2025-06-02 18:30:00', 0, NOW(), NOW()),
(55, 1, '2025-06-03 18:30:00', 0, NOW(), NOW()),
(55, 1, '2025-06-04 18:30:00', 0, NOW(), NOW()),
(55, 1, '2025-06-05 18:30:00', 0, NOW(), NOW()),
(55, 1, '2025-06-06 18:30:00', 0, NOW(), NOW()),
(55, 1, '2025-06-07 18:30:00', 0, NOW(), NOW()),
(55, 1, '2025-06-08 18:30:00', 0, NOW(), NOW()),
(55, 1, '2025-06-09 18:30:00', 0, NOW(), NOW()),
(55, 1, '2025-06-10 18:30:00', 0, NOW(), NOW());

-- ========================================
-- ğŸ§ª Step 5. ê·¼íƒœ ìˆ˜ì • ìš”ì²­ ë”ë¯¸ ë°ì´í„° (record_id ê¸°ì¤€)
-- ========================================

ALTER TABLE attendance_record_change_request MODIFY COLUMN approved_member_id INT NULL;

INSERT INTO attendance_record_change_request
(`attendance_record_id`, `reason`, `request_at`, `status`, `approved_member_id`, `approved_at`, `created_at`, `updated_at`)
VALUES
(1, 'ì¶œê·¼ ì‹œê°„ì´ ì˜ëª» ì…ë ¥ë˜ì—ˆìŠµë‹ˆë‹¤.', '2025-06-11 10:00:00', 0, NULL, NULL, NOW(), NOW()),
(2, 'ì§€ê° ì²˜ë¦¬ ìš”ì²­', '2025-06-12 11:00:00', 1, 55, '2025-06-12 12:00:00', NOW(), NOW()),
(21, 'ê¸°ë¡ ëˆ„ë½ìœ¼ë¡œ ì¸í•œ ìˆ˜ì • ìš”ì²­ì…ë‹ˆë‹¤.', '2025-06-11 09:30:00', 2, 55, '2025-06-12 09:45:00', NOW(), NOW()),
(22, 'ì¶œê·¼ ì‹œê°„ ì •ì • ìš”ì²­', '2025-06-13 09:00:00', 0, NULL, NULL, NOW(), NOW()),
(41, 'ê¸°ë¡ ì˜¤ë¥˜ë¡œ ì¸í•œ ë³€ê²½ ìš”ì²­', '2025-06-14 08:00:00', 1, 10, '2025-06-14 08:30:00', NOW(), NOW()),
(42, 'ì¶œê·¼ ì²˜ë¦¬ ëˆ„ë½', '2025-06-14 08:15:00', 0, NULL, NULL, NOW(), NOW());
